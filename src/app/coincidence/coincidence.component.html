<mgl-geojson-source
    *ngIf="coincidences"
     id="coincidenceSource"
     [data] = "coincidences"
 >
 </mgl-geojson-source>
<mgl-layer
*ngIf="coincidences"
 id="coincidencesFill"
 type="line"
 source="coincidenceSource"
 [layout]='{visibility: "visible", "line-join": "round", "line-cap": "round"}'
 [paint]="{
   'line-color': '#e8f442',
   'line-width': 8
   }"
 (mouseMove)="activateHoverOn($event)"
 (mouseLeave)="disableHover()"
 (click)="onClick($event)"
 ></mgl-layer>
<mgl-control position = 'top-left'>
  <div class = 'coincidences'>
    <span class = 'coincidence'*ngFor='let t of textIndices'>
        <span *ngIf="t%2==0"><button class="text" (click)="selectIndex(t)">{{coincidence.properties[t]}}</button></span>
        <span *ngIf="t%2==1"> <input #textEnter type='text' value='{{coincidence.properties[t]}}' (keyup) = 'updateText(t,textEnter.value)'></span>
    </span>
  </div>
</mgl-control>
<mgl-control position = 'top-right' class="buttons">
  <button *ngIf="textLength > 1" (click) = 'addCoincidence()' class="addCoincidence">Add</button>
  <button *ngIf="selectedIndex != null" (click) = 'removeCoincidence()' class="removeCoincidence">Remove</button>
</mgl-control>
<mgl-popup
    *ngIf="selectedPoint"
    [lngLat]="selectedCoords"
    (close)="selectedPoint = null"
  >
  <div class="coincidencesPopup">
    <span class="coincidencePopup" *ngFor="let t of objectKeys(selectedPoint.properties)">
      <p class="text">{{selectedPoint.properties[t]}}</p>
    </span>
    <button class="addButton"
    (click) = 'addText(selectedPoint.properties[t]); addCoords(selectedCoords);'>
    Add</button>
  </div>
  </mgl-popup>
  <mgl-popup
      *ngIf="clickedPoint"
      [lngLat]="clickedCoords"
      (close)="clickedPoint = null"
    >
    <div class="coincidencesPopup">
      <span class="coincidencePopup" *ngFor="let t of objectKeys(clickedPoint.properties)">
        <p class="text">{{clickedPoint.properties[t]}}</p>
      </span>
      <button class="addButton"
      (click) = 'addText(clickedPoint.properties[t]); addCoords(clickedCoords);'>
      Add</button>
    </div>
    </mgl-popup>
